<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Street View Labeler - Demo Interface</title>
<link rel="stylesheet" href="css/Fonts.css" />
<link rel="stylesheet" href="css/StreetViewWalker.css" />
<script src="vendor/jquery-1.7.2.min.js"></script>
<script src="vendor/jquery.hoverIntent.minified.js"></script>
<script src="vendor/jquery.cookies.2.2.0.min.js"></script>
<script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDzYR4m-3upEQ-bIQam35ixN1BgxnPsY7k&sensor=false"></script>
<script src="src/SVLabel/Utilities.js"></script>
<script src="src/SVLabel/UtilitiesColor.js"></script>
<script src="src/SVLabel/UtilitiesShape.js"></script>
<script src="src/SVLabel/UtilitiesSidewalk.js"></script>
<script src="src/SVLabel/Point.js"></script>
<script src="src/SVLabel/Path.js"></script>
<script src="src/SVLabel/Label.js"></script>
<script src="src/SVLabel/Canvas.js"></script>
<script src="vendor/clipper.js"></script>
<script src="src/Fog.js"></script>
<script src="src/SVLabel/Map.js"></script>
<script src="src/SVLabel/RibbonMenu.js"></script>
<script src="src/SVLabel/RightClickMenu.js"></script>
<script src="src/SVLabel/Form.js"></script>
<script src="src/SVLabel/OverlayMessageBox.js"></script>
<script src="src/SVLabel/ActionStack.js"></script>
<script src="src/SVLabel/Onboarding/Onboarding.js"></script>
<script src="src/SVLabel/Onboarding/Onboarding_LabelingCurbRamps.js"></script>
<script src="src/SVLabel/Onboarding/Onboarding_LabelingCurbRampsDifficultScene2.js"></script>
<script src="src/SVLabel/Onboarding/Onboarding_SkipAlleyWithoutCurbRamps.js"></script>
<script src="src/SVLabel/Onboarding/Onboarding_QuickCheckCurbRamps.js"></script>
<script src="vendor/kinetic-v4.3.3.min.js"></script>
<script src="src/SVLabel/Onboarding/Onboarding_GrabAndDragAnimation.js"></script>
<script src="src/SVLabel/ExampleWindow.js"></script>
<script src="src/SVLabel/Keyboard.js"></script>
<script src="src/SVLabel/CurrentMissionDescription.js"></script>
<script src="src/SVLabel/LabeledLandmarkFeedback.js"></script>
<script src="src/SVLabel/QualificationBadges.js"></script>
<script src="src/SVLabel/ProgressFeedback.js"></script>
<script src="src/SVLabel/Tracker.js"></script>
<script src="src/SVLabel/MessageBox.js"></script>
<script src="src/SVLabel/ZoomControl.js"></script>
<script src="src/SVLabel/Tooltip.js"></script>
<script src="src/SVLabel/ProgressPov.js"></script>
<script>
var svw = svw || {};

$(document).ready(function(){
    //
    // Solutions to annoying text selection cursor.
    // http://forum.jquery.com/topic/chrome-text-select-cursor-on-drag
    document.onselectstart = function () { return false; };


    //
    // Collect information necessary for initializing interface components
    //
    var qualification_url = ''; // '<?php echo url_for('/api_get_qualification'); ?>';
    var task_url = ''; // '<?php echo url_for('/api_get_intersection'); ?>';

    var hasPerformedPreviousStudy = undefined;
    var qualifications = undefined;
    var onboardingStatus = undefined;

    var hitId = getURLParameter("hitId");
    var assignmentId =  getURLParameter("assignmentId");
    var turkerId =  getURLParameter("workerId");
    var previewMode = false;

    turkerId = turkerId ? turkerId : 'Test_Kotaro';
    assignmentId = assignmentId ? assignmentId : 'Test_Assignment';
    hitId = hitId ? hitId : 'Test_Hit';

    if (!getURLParameter('workerId') || getURLParameter('groupId')) {
        previewMode = true;
    }

    //
    // Get user's qualificaiton status (i.e., have they performed onboarding, previous study, etc..
    /*
    $.ajax({
        async: false,
        dataType: "json",
        url: qualification_url,
        type: 'get',
        data: {turker_id : turkerId},
        success: function (result) {
            if (result && result.error) {
                throw result.error.message;
            }
                            qualifications = {};
                qualifications.onboardingQualifications = result.qualifications ? result.qualifications.map(function (value) {return value.QualificationType;}) : [];
                qualifications.hasPerformedPreviousStudy = result.hasPerformedPreviousStudy;
//            qualifications = {};
//            qualifications.onboardingQualifications = result ? result.map(function (value) {return value.QualificationType;}) : [];
//            qualifications.hasPerformedPreviousStudy = false;
        },
        error: function (error) {
            console.error(error);
        }
    });
    */
    /*
    if ('hasPerformedPreviousStudy' in qualifications &&
        qualifications.hasPerformedPreviousStudy) {
        hasPerformedPreviousStudy = true;
    } else {
        hasPerformedPreviousStudy = false;
    }
    */
    hasPerformedPreviousStudy = false;

    /*
    if ("onboardingQualifications" in qualifications) {
        if (qualifications.onboardingQualifications.indexOf("LabelingCurbRamp") == -1) {
            onboardingStatus = "LabelingCurbRamp";
        } else if (qualifications.onboardingQualifications.indexOf("CompletingATask") == -1) {
            onboardingStatus = "CompletingATask";
        } else if (qualifications.onboardingQualifications.indexOf("SkipAlley") == -1) {
            onboardingStatus = "SkipAlley";
        } else {
            onboardingStatus = 'Done';
        }
    } else {
        onboardingStatus = 'Done';
    }
    */

    onboardingStatus = 'Done';

    // Check if this person has participated in any of previous study, then do not allow him/her
    // to perform this task.
    if (hasPerformedPreviousStudy && turkerId !== 'Test_Kotaro') {
        var message = 'You have worked on this HIT before. For the research purpose, we cannot hire a person ' +
            'who has already performed another HIT of the same type. Please return the HIT. ' +
            'Thank you for your interest in our task.';
        svw.messageBox = new MessageBox();
        svw.messageBox.setPosition(0, 300, width=920, height=90, background=true);
        svw.messageBox.setMessage(message);
        svw.messageBox.show();
        return false;
    }

    //
    // Set parameters for instantiating objects.
    //
    var exampleWindowParam;
    exampleWindowParam = {};
    exampleWindowParam.domIds = {
        holder : '#Holder_Examples',
        closeButtonHolder : '#Holder_ExamplesCloseButton',
        StopSign_OneLeg : '#Example_OneLegBusStopSign',
        StopSign_TwoLegs : '#Example_TwoLegBusStopSign',
        StopSign_Column : '#Example_ColumnBusStopSign',
        NextToCurb : '#Example_NextToCurb',
        AwayFromCurb : '#Example_AwayFromCurb'
    };

    var canvasParam = {};
    canvasParam.domIds = {'canvas': 'labelCanvas'};

    var formParam = {};
    formParam.dataStoreUrl = ''; // '<?php echo url_for("/api_post_labels");?>';
    formParam.hitId = hitId;
    formParam.assignmentId = assignmentId;
    formParam.turkerId = turkerId;
    formParam.onboarding = (onboardingStatus !== 'Done') ? true : false;
    formParam.taskPanoramaId = "";
    formParam.taskDescription = "";
    formParam.domIds = {};
    formParam.domIds.canvas = 'onboardingCanvas';

    var overlayMessageBoxParam = {};
    overlayMessageBoxParam.domIds = {
        Holder_OverlayMessage : "#OverlayMessageBox",
        OverlayMessage : "#OverlayMessage"
    };

    var currentMissionDescriptionParam = {};
    currentMissionDescriptionParam.domIds = {
        descriptionMessage : "#CurrentStatus_Description"
    };
    currentMissionDescriptionParam.description = "Your mission is to learn how to <span class='bold'>walk</span> using our interface.";

    var labeledLandmarkFeedbackParam = {};
    labeledLandmarkFeedbackParam.domIds = {};

    var qualificationBadgesParam = {};
    qualificationBadgesParam.domIds = {};

    var progressFeedbackParam = {};
    progressFeedbackParam.domIds = {};
    progressFeedbackParam.message = "";

    var actionStackParam = {};
    actionStackParam.domIds = {
        'redoButton' : "#ActionStackRedoButton",
        'undoButton' : "#ActionStackUndoButton"
    };

    var zoomControlParam = {};
    zoomControlParam.domIds = {
        zoomInButton: '#ZoomControlZoomInButton',
        zoomOutButton: '#ZoomControlZoomOutButton'
    };

    var tooltipParam = {};
    tooltipParam.domIds = {
        tooltipHolder: '#HolderTooltip'
    };

    var mapParam = {};

    //
    // Instantiate objects.
    //
    svw.tracker = new Tracker();
    svw.keyboard = new Keyboard($);
    svw.canvas = new Canvas(canvasParam, $);
    svw.form = new Form(formParam);
    svw.examples = new ExampleWindow(exampleWindowParam);
    svw.overlayMessageBox = new OverlayMessageBox(overlayMessageBoxParam);
    svw.currentMissionDescription = new CurrentMissionDescription(currentMissionDescriptionParam);
    svw.labeledLandmarkFeedback = new LabeledLandmarkFeedback(labeledLandmarkFeedbackParam);
    svw.qualificationBadges = new QualificationBadges(qualificationBadgesParam);
    svw.progressFeedback = new ProgressFeedback(progressFeedbackParam);
    svw.actionStack = new ActionStack(actionStackParam);
    svw.ribbon = new RibbonMenu($);
    svw.messageBox = new MessageBox();
    svw.zoomControl = new ZoomControl(zoomControlParam, $);
    svw.tooltip = new Tooltip(tooltipParam, $);
    svw.onboarding = undefined;

    onboardingStatus = getURLParameter('onboardingStatus');
    if (!onboardingStatus) {
        onboardingStatus = $.cookies.get('onboardingStatus');
        onboardingStatus = onboardingStatus ? onboardingStatus : "LabelingCurbRamp";
    }
    onboardingStatus = 'Done';

    if (onboardingStatus !== "Done") {
        var onboardingParam = {};
        onboardingParam.domIds = {};
        onboardingParam.domIds.canvas = 'onboardingCanvas';
        onboardingParam.turker_id = turkerId;
        if (onboardingStatus === "LabelingCurbRamp" ||
            onboardingStatus === "onboarding1") {
            onboardingParam.qualification_url = ''; // '<?php echo url_for('Qualify_LabelingCurbRamps'); ?>';
            svw.onboarding = new Onboarding_LabelingCurbRamps(onboardingParam, $);
            $.cookies.set('onboardingStatus', 'CompletingATask');
        } else if (onboardingStatus === "CompletingATask" ||
            onboardingStatus === "onboarding2") {
            onboardingParam.qualification_url = ''; // '<?php echo url_for('Qualify_CompletingATask'); ?>';
            svw.onboarding = new Onboarding_LabelingCurbRampsDifficultScene2(onboardingParam, $);
            $.cookies.set('onboardingStatus', 'SkipAlley');
        } else if (onboardingStatus === "SkipAlley" ||
            onboardingStatus === "onboarding3") {
            onboardingParam.qualification_url = ''; // '<?php echo url_for('Qualify_SkipAlley'); ?>';
            svw.onboarding = new Onboarding_SkipAlleyWithoutCurbRamps(onboardingParam, $);
            $.cookies.set('onboardingStatus', 'LabelingCurbRamp');
        }  else {
            svw.onboarding = undefined;
            $.cookies.set('onboardingStatus', 'LabelingCurbRamp');
        }
    }
    svw.onboarding = false;



    svw.form.disableSubmit();

    //
    // Set a progress bar.
    var progressPovParam = {};
    if ('onboarding' in svw && svw.onboarding) {
        progressPovParam.pov = svw.onboarding.panoramaPov;
    }
    svw.progressPov = new ProgressPov(progressPovParam, $);


    svw.tracker.push('TaskStart');
    //
    // Set map parameters and instantiate it.
    //
    mapParam.canvas = svw.canvas;
    mapParam.overlayMessageBox = svw.overlayMessageBox;
    mapParam.domIds = {
        canvas: "canvas#labelCanvas",
        divMapCanvas : "map_canvas",
        divLabelDrawingLayer : "div#labelDrawingLayer",
        divPano : "div#pano",
        divStreetViewHolder : "div#streetViewHolder",
        divViewControlLayer : "div#viewControlLayer",
        spanModeSwitchWalk : "span#modeSwitchWalk",
        spanModeSwitchDraw : "span#modeSwitchDraw"
    };

    // Get latlng and pov data from svw.onboarding or use data from PHP
    if (svw.onboarding) {
        mapParam.latlng = svw.onboarding.latlng;
        // mapParam.panoramaPov = svw.onboarding.panoramaPov;
        // Set the bus stop icon on map
        mapParam.Lat = SVLat;
        mapParam.Lng = SVLng;
        mapParam.panoramaPov = svw.onboarding.panoramaPov;
        mapParam.taskPanoId = svw.onboarding.panoId;
    } else {
        var taskDescription;
        var taskSpecification;
        var SVLat;
        var SVLng;
        var headingEstimate;
        var currentProgress;
        var panoId = '_AUz5cV_ofocoDbesxY3Kw';
        taskDescription = 'PilotTask_v2_MountPleasant';

        /*
        $.ajax({
            async: false,
            dataType: "json",
            url: task_url,
            type: 'get',
            data: {
                worker_id: turkerId,
                task_description: taskDescription,
                pano_id: '_AUz5cV_ofocoDbesxY3Kw'
            },
            success: function (result) {
                if (result.error) {
                    throw result.error.message;
                }
                taskSpecification = result;
            },
            error: function (result) {
                throw result;
            }
        });
        */

        // if (taskSpecification.error) {
        if (false) { // todo
            svw.messageBox.setPosition(0, 300, width=920, height=90, background=true);
            svw.messageBox.setMessage(taskSpecification.message);
            svw.messageBox.show();
            return false;
        } else {
            var task = null; // Todo. taskSpecification.intersections[0];
            var nearbyPanoIds = [];
            var totalTaskCount = -1;
            var taskPanoramaId = '';
            var taskRemaining = -1;
            var taskCompleted = -1;
            //var SVLat;
            //var SVLng;
            //var headingEstimate = 0;
            //var currentProgress = 0;
            var isFirstTask = false;

            totalTaskCount = 1; // taskSpecification.numAllTasks;
            taskRemaining = 1; // taskSpecification.numTasksRemaining;
            taskCompleted = totalTaskCount - taskRemaining;
            currentProgress = taskCompleted / totalTaskCount;

            svw.form.setTaskRemaining(taskRemaining);
            svw.form.setTaskDescription(''); // Todo. task.TaskDescription);
            svw.form.setTaskPanoramaId(panoId); // Todo. task.TaskPanoramaId);
            SVLat = parseFloat(38.894799); // Todo
            SVLng = parseFloat(-77.021906); // Todo
            // headingEstimate = getHeadingEstimate(SVLat, SVLng, BusStopLat, BusStopLng);
            currentProgress = parseFloat(currentProgress);

            mapParam.Lat = SVLat;
            mapParam.Lng = SVLng;
            mapParam.panoramaPov = {
                heading: 0,
                pitch: -10,
                zoom: 1
            };
            // mapParam.targetLat = task.Lat;
            // mapParam.targetLng = task.Lng;
            mapParam.taskPanoId = panoId; // task.NearestGSVPanoramaId;

            // Build a list of pano ids that a user can access.
            nearbyPanoIds = [mapParam.taskPanoId];

            /*
            if (task.nearByPanoIds) {
                var nearbyPanoidsLen = 1; // task.nearbyPanoIds.length;
                for (var i = 0; i < nearbyPanoidsLen; i += 1) {
                    nearbyPanoIds.push(taskSpecification.nearbyPanoIds[i].GSVPanoramaId);
                }
            }
            */

            mapParam.availablePanoIds = nearbyPanoIds;

            svw.currentMissionDescription.setCurrentStatusDescription('Your mission is to ' +
                '<span class="bold">find and label</span> presence and absence of curb ramps at intersections.');
            svw.progressFeedback.setProgress(currentProgress);
            svw.progressFeedback.setMessage("You have finished " + (totalTaskCount - taskRemaining) +
                " out of " + totalTaskCount + ".");
            svw.qualificationBadges.giveBusStopAuditorBadge();
            svw.qualificationBadges.giveBusStopExplorerBadge();


            if (isFirstTask) {
                svw.messageBox.setPosition(10, 120, width=400, height=undefined, background=true);
                svw.messageBox.setMessage("<span class='bold'>Remember, label all the landmarks close to the bus stop.</span> " +
                    "Now the actual task begins. Click OK to start the task.");
                svw.messageBox.appendOKButton();
                svw.messageBox.show();
            } else {
                svw.messageBox.hide();
            }
        }


    }


    // Instantiation
    svw.map = new Map(mapParam);
    svw.map.setStatus('hideNonavailablePanoLinks', true);


    // Execute onboarding if they are defined
    if (svw.onboarding) {
        // svw.onboarding.set('map', svw.map);
        svw.onboarding.start();
    } else {
        //
        // Debug
        // Show pano id and city names.
        //var str = "PanoId: " + getPanoId() + "<br/>City: " + task.City;
        // $("#debug").html(str);
    }
    // svw.keyboard.set('exampleWindow', svw.examples);

    // svw.quickCheck = new Onboarding_QuickCheckCurbRamps({}, $); // debug
});
</script>
</head>
<body>
<div id="Holder_Application">
<div id="Holder_RibbonMenu">
        <span id="Holder_RibbonMenuLeftColumn">
            <div id="RibbonMenu_LeftColumnTitle">

            </div>
            <div id="RibbonMenu_LeftColumnIcons">
                <span class="modeSwitch" val="Walk" id="modeSwitchWalk" style="width:50px;">
                    <span class="modeSwitch_Icon">
                        <img src="img/icons/Icon_Walker.png"
                             id="Icon_Explore"
                             class="Icon_RibbonMenuLarge"
                             alt="Mode switch: Walk" align="">
                    </span>
                    <span class="modeSwitch_Name" style="position:absolute; left: 0px;">
                        Explore
                    </span>
                    <div class="RibbonModeSwitchHorizontalLine" value="Walk"></div>
                </span>
            </div>
            <!-- Vertical border
            <span class="VerticalLine_Solid InlineBlock"
                    style="height:70px; position:absolute;left:66px;top:25px;">

            </span>
            -->
        </span>
        <span id="Holder_Landmark">
            <div id="RibbonMenu_LandmarkTitle">
                Find and label the following
            </div>
            <div id="RibbonMenu_LandmarkIcons">
                <span id="ModeSwitchButton_CurbRamp" class="modeSwitch" val="CurbRamp">
                    <span class="modeSwitch_Icon">
                        <img src="img/icons/Sidewalk/Icon_CurbRamp-13.svg" class="Icon_RibbonMenuLarge" alt="Mode switch:" align="">
                    </span>
                    <div class="modeSwitch_Name">
                        Curb Ramp
                    </div>
                    <div class="RibbonModeSwitchHorizontalLine" value="CurbRamp"></div>
                </span>
                <span id="ModeSwitchButton_NoCurbRamp" class="modeSwitch" val="NoCurbRamp">
                    <span class="modeSwitch_Icon">
                        <img src="img/icons/Sidewalk/Icon_NoCurbRamp-14.svg" class="Icon_RibbonMenuLarge" alt="Mode switch:" align="">
                    </span>
                    <span class="modeSwitch_Name">
                        Missing Curb Ramp
                    </span>
                    <div class="RibbonModeSwitchHorizontalLine" value="NoCurbRamp"></div>
                </span>
            </div>
        </span>

</div>
<div id="Holder_ZoomControl">
    <div id="Holder_ZoomControlButtons">
        <button id="ZoomControlZoomInButton" class="button ZoomControlButtons">
            <img src="img/icons/ZoomIn.svg"
                 class="ZoomButtonIcons"><br />
            <small>Zoom In</small>
        </button>
        <button id="ZoomControlZoomOutButton" class="button ZoomControlButtons">
            <img src="img/icons/ZoomOut.svg"
                 class="ZoomButtonIcons"><br />
            <small>Zoom Out</small>
        </button>
    </div>
</div>
<div id="Holder_ActionStackControl">
    <div id="Holder_ActionStackButtons">
        <button id="ActionStackUndoButton" class="button ActionStackButtons" value="Undo">
            <img src="img/icons/Icon_Undo.png" class="ActionStackButtonIcons" alt="Undo" /><br />
            <small>Undo</small>
        </button>
        <button id="ActionStackRedoButton" class="button ActionStackButtons" value="Redo">
            <img src="img/icons/Icon_Redo.png" class="ActionStackButtonIcons" alt="Redo" /><br />
            <small>Redo</small>
        </button>
    </div>
        <span class="VerticalLine_ThinDottedGray InlineBlock"
              style="height:42px; position:absolute;right:12px;bottom:0px;">
                <!-- Vertical border -->
        </span>
</div>
<div id="Holder_DirectManipulation" onSelectStart="return true;">
    <div id="Holder_StreetView">
        <div id="StreetViewLabelRibbonConnection">
            <!-- border -->
        </div>
        <!-- You can put an extra div element on top of the Street View div panel to disable any of StreetView control. -->
        <div id="pano" class="Window_StreetView" style="z-index: 0;" ></div>
        <div id="Holder_OverlayMessage" class="Window_StreetView">
                <span id="OverlayMessageBox">
                    <span id="OverlayMessage">Walk</span>
                </span>
        </div>
        <div id="Holder_Onboarding" class="Window_StreetView">
            <div id="Holder_OnboardingCanvas">
                <canvas id="onboardingCanvas"
                        width="720px" height="480px">
                </canvas>
                <div id="Holder_OnboardingMessageBox">
                    <div id="Holder_OnboardingMessage">

                    </div>
                </div>
            </div>
        </div>

        <div id="userControlLayer"  class="Window_StreetView" style="z-index: 0;">
            <div id="viewControlLayer"  class="Window_StreetView" style="cursor: url(img/cursors/openhand.cur) 4 4, move; z-index: 1;">
                <!-- In IE, it seems like a div element that has nothing inside gets neglected...
                    So I put an empty canvas as a place holder.
                -->
                <!--[if IE]>
                <canvas width="720px" height="480px"  class="Window_StreetView" style=""></canvas>
                <![endif]-->
            </div>
            <div id="labelDrawingLayer"  class="Window_StreetView" style="z-index: 0;">
                <canvas id="labelCanvas"  class="Window_StreetView"
                        width="720px" height="480px"
                        style="cursor: default, move; /*cursor: url(img/cursors/Target.cur) 16 16, move;*/">
                </canvas>

            </div>
        </div>

        <div id="Holder_LabelDeleteIcon">
            <!-- <img src="public/img/icons/Icon_Delete_WhiteBackground.png"
                 id="LabelDeleteIcon"    /> -->
            <img src="img/icons/Sidewalk/Icon_Delete.svg"
                 id="LabelDeleteIcon" />
        </div>
        <div id="Holder_LabelEditIcon">
            <img src="img/icons/Icon_Edit.png"
                 id="LabelEditIcon"    />
        </div>
    </div>
    <div id="Holder_Feedback" class="Window_Feedback">
        <div id="FeedbackTitle">
            Status
        </div>
        <div id="Holder_FeedbackContents">
            <div id="Holder_CurrentStatus" class="FeedbackBox">
                <div id="CurrentStatus_Title">
                    <span class="bold">Mission:</span>
                </div>
                <div id="CurrentStatus_Description">
                    A description of a user's current mission.
                </div>
            </div>
            <div id="Holder_Progress" class="FeedbackBox">
                <div id="Progress_Title">
                    <span class="bold">Progress:</span>
                </div>
                <div id="Progress_Description">
                    <div id="ProgressBarContainer">
                        <div id="ProgressBarFilled">
                        </div>
                    </div>
                    <div id="Progress_Message">
                        You are half way done with tutorials!
                    </div>
                </div>
            </div>
            <div id="Holder_LabeledLandmarks" class="FeedbackBox">
                <div id="LabeledLandmarks_Title">
                    <span class="bold">Labeled Landmarks:</span>
                </div>
                <div id="LabeledLandmarks_Description">
                    <div id="LabeledLandmarkHolder_CurbRamp" class="LabeledLandmarkHolder">
                        <div class="LabeledLandmarkIconHolder">
                            <img src="img/icons/Sidewalk/Icon_CurbRamp-13.svg"
                                 class="LabeledLandmark_Icon">
                            <div class="LabeledLandmark_Description">
                                Bus Stop Sign
                            </div>
                            <div id="LabeledLandmarkCount_CurbRamp" class="LabeledLandmark_Count">
                                0
                            </div>
                        </div>
                    </div>
                    <div id="LabeledLandmarkHolder_NoCurbRamp" class="LabeledLandmarkHolder">
                        <div class="LabeledLandmarkIconHolder">
                            <img src="img/icons/Sidewalk/Icon_NoCurbRamp-14.svg"
                                 class="LabeledLandmark_Icon">
                            <div class="LabeledLandmark_Description">
                                Bus stop shelter
                            </div>
                            <div id="LabeledLandmarkCount_NoCurbRamp" class="LabeledLandmark_Count">
                                0
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="Holder_ProgressPov">
            <div id="Holder_ProgressPovDescription" class="bold">Observed area:</div>
            <div id="Holder_CurrentCompletionBar"></div>
            <div id="Holder_CurrentCompletionBarFiller"></div>
            <div id="Holder_CurrentCompletionRate">Hi!</div>
        </div>
    </div>
    <div id="Holder_GoogleMap">
        <div id="map_canvas" class="Window_GoogleMap" style="">

        </div>
        <div id="mapOverlay" class="Window_GoogleMap" style="z-index: 1">
            <!-- In IE, it seems like a div element that has nothing inside gets neglected...
                    So I put an empty canvas as a place holder.
            -->
            <!--[if IE]>
            <canvas width="200px" height="200px" class="Window_GoogleMap"></canvas>
            <![endif]-->
        </div>
    </div>
</div>
<div id="Holder_Form">
    <form id="BusStopLabelerForm"
          method="Post"
          action="http://www.mturk.com/mturk/externalSubmit">
        <input type="hidden" name="assignmentId" value="" />
        <input type="hidden" name="workerId" value=""/>
        <input type="hidden" name="hitId" value="" />
        <div id="Holder_CommentField">
            <textarea id="CommentField" class="defaultTextActive"
                      title="Please enter any comments about this bus stop that may affect people with visual impairment (optional)"></textarea>
        </div>
        <div id="Holder_Buttons">
            <button id="Button_Skip" class="button" style="margin-top: 3px; width:300px;" onclick="return false;">Skip</button>
            <input type="submit" id="Button_Submit" class="button" style="margin-top: 3px; width:635px;" value="Submit" />
        </div>
        <div id="Holder_SkipOptions">
            <div id="Holder_BusStopAbsenceBackground">
                <div id="BusStopAbsenceQuestion">
                    Why are you skipping this task?
                </div>
                <div id="BusStopAbsenceOptions">
                        <span class="BusStopAbsenceOption">
                            <input type="radio" name="BusStopAbsence" class="Radio_BusStopAbsence" value="Not an intersection: The user thinks this is not an intersection.">
                            This is not an intersection.
                        </span>
                        <span class="BusStopAbsenceOption">
                            <input type="radio" name="BusStopAbsence"
                                   id="Radio_NoCurbRampsRequired"
                                   class="Radio_BusStopAbsence"
                                   value="Curb Ramps Not Necessary: The user thinks curb ramps are not necessary at this intersection.">
                            This intersection does not require curb ramps.
                        </span>
                        <span class="BusStopAbsenceOption">
                            <input type="radio" name="BusStopAbsence" class="Radio_BusStopAbsence" value="Other:">
                            Other:
                            <input type="text" name="BusStopAbsenceOtherReason" id="Text_BusStopAbsenceOtherReason">
                        </span>
                </div>
                <div id="BusStopAbsenceButtons">
                    <button class="button" id="BusStopAbsence_Submit" onclick="return false;">OK</button>
                    <button class="button" id="BusStopAbsence_Cancel" onclick="return false;">Cancel</button>
                </div>
            </div>
        </div>
        <div id="Holder_FooterMessage">
            This study is being conducted by the University of Maryland.
        </div>
    </form>
</div>
<div id="Holder_QuickCheck">
    <h2 class="bold">Quick Check</h2><br />
    <p id="QuickCheckInstructionHolder"></p>
    <div id="QuickCheckImageHolder">
    </div>
    <div id="QuickCheckMessageHolder">
    </div>
    <div id="QuickCheckButtonsHolder">
        <input type="button" id="QuickCheckSubmit" class="button" value="Submit"/>
        <input type="button" id="QuickCheckNext" class="button" value="Next"/>
    </div>
</div>
<div id="Holder_PageOverlay">
    <img src="img/misc/AjaxLoader.gif"
         id="PageOverlayImage_AjaxLoader">
</div>
    <!-- <span id="debug" style="position:absolute;top:700px;left:0;">Debug</span> -->
</div>
<div id="Researcher_Message"></div>
<div id="HolderTooltip">HelloWorld</div>
</body>
</html>
